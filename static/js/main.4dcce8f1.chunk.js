(this["webpackJsonpreact-materialui-boilerplate"]=this["webpackJsonpreact-materialui-boilerplate"]||[]).push([[0],{61:function(e,t,a){e.exports=a(74)},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),i=a.n(o),c=a(11),l=a(12),s=a(17),u=a(16),m=a(18),d=a(113),h=(a(66),a(56)),p=a(92),v=a(40),f=Object(h.a)({typography:{useNextVariants:!0},palette:{primary:p.a,secondary:v.a}}),g=a(114),b=a(93),E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={showInstalledMessage:!1,showUpdateMessage:!1,showUpdateOnRestartMessage:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.appServiceWorker;t&&(t.onInstalled((function(){return e.setState({showInstalledMessage:!0})})),t.onUpdateFound((function(){return e.setState({showUpdateMessage:!0})})))}},{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,this.props.children,r.a.createElement(g.a,{open:this.state.showInstalledMessage,autoHideDuration:6e3,onClose:function(){return e.setState({showInstalledMessage:!1})},message:"The APP is ready to  work offline."}),r.a.createElement(g.a,{open:this.state.showUpdateMessage,onClose:function(){return e.setState({showUpdateMessage:!1,showUpdateOnRestartMessage:!0})},message:"A new version is available.",action:[r.a.createElement(b.a,{key:"undo",color:"secondary",size:"small",onClick:function(){return window.location.reload()}},"UPDATE")]}),r.a.createElement(g.a,{open:this.state.showUpdateOnRestartMessage,autoHideDuration:6e3,onClose:function(){return e.setState({showUpdateOnRestartMessage:!1})},message:"The APP will be updated on the next restart."}))}}]),t}(n.Component),y=a(28),w=a(24),O=a(26),k=a.n(O),j=a(30),D=a(39),P=a(94),S=a(95),x=a(96),U=a(41),W=a(4),T=a(97),A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).goBack=function(){return window.history.back()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.classes,n=e.title,o=e.backButton,i=void 0!==o&&o,c=e.rightAction,l=e.appBarProps,s=Object(D.a)(e,["children","classes","title","backButton","rightAction","appBarProps"]);return r.a.createElement(P.a,Object.assign({position:"sticky"},l,s),r.a.createElement(S.a,null,r.a.createElement("div",{className:a.menuButtonWrapper},i&&r.a.createElement(x.a,{color:"inherit","aria-label":"Menu",onClick:this.goBack},r.a.createElement(T.a,null))),n&&r.a.createElement(U.a,{variant:"h6",color:"inherit",className:a.flex},n),c&&r.a.createElement("div",null,c)),t)}}]),t}(n.Component),C=Object(W.a)({root:{},flex:{flex:1},menuButtonWrapper:{marginLeft:-12,marginRight:20}})(A),M=a(101),N=a(54);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var z="https://iot-auth-api.herokuapp.com/app";function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.method,n=void 0===a?"GET":a,r=t.body,o=Object(D.a)(t,["method","body"]);return r&&(r=JSON.stringify(r)),fetch(z+e,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({headers:{"Content-Type":"application/json"},method:n,body:r},o)).then((function(e){return e.json()}))}var L=function(e){return B("/devices")},I=function(){return B("/devices/new")},F=function(e){return B("/devices/".concat(e,"/authorize"),{method:"PUT"})},V=function(e){return B("/devices/".concat(e,"/authorize"),{method:"DELETE"})},J=function(e){return B("/data")},H=a(98),q=a(99),G=a(100),Q={item:{margin:"10px 0"}};function $(e){var t=e.onUpdate,a=e.devices,n=void 0===a?[]:a;return r.a.createElement("div",null,n.map((function(e){return r.a.createElement(K,{key:e.id,device:e,onUpdate:t})})))}function K(e){var t=e.onUpdate,a=void 0===t?function(){}:t,n=e.device,o=n.id,i=n.name,c=n.createdAt,l=n.ip,s=n.address,u=n.authorized,m=new Date(c);return r.a.createElement(H.a,{style:Q.item},r.a.createElement(q.a,null,r.a.createElement(U.a,{color:"textSecondary",gutterBottom:!0},m.toLocaleDateString(),", \xe0s ",m.toLocaleTimeString()),r.a.createElement(U.a,{variant:"h5",component:"h2"},i),r.a.createElement(U.a,{color:null===u?"textSecondary":u?"primary":"error"},"Autoriza\xe7\xe3o: ",null===u?"N\xe3o definido":u?"Autorizado":"Revogada"),r.a.createElement(U.a,{variant:"body2",component:"p"},r.a.createElement("b",null,"IP: ")," ",l||"Local"," ",r.a.createElement("br",null),r.a.createElement("b",null,"Endere\xe7o: ")," ",s?r.a.createElement("address",null,s):"N\xe3o informado")),r.a.createElement(G.a,null,r.a.createElement(b.a,{color:"primary",size:"small",onClick:function(){return F(o).then(a)}},"Autorizar"),r.a.createElement(b.a,{color:"secondary",size:"small",onClick:function(){return V(o).then(a)}},"Revogar")))}var X=a(102),Y=1e3,Z=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={newDevices:[]},a.updateNewDevices=Object(j.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:if(t=e.sent,a.timeout){e.next=5;break}return e.abrupt("return");case 5:a.setState({newDevices:t}),a.timeout=setTimeout(a.updateNewDevices,Y);case 7:case"end":return e.stop()}}),e)}))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.timeout=setTimeout(this.updateNewDevices,0)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.timeout=null}},{key:"render",value:function(){var e=this.state.newDevices;return r.a.createElement(n.Fragment,null,r.a.createElement(C,{title:"Dispositivos novos"}),r.a.createElement("main",null,r.a.createElement(M.a,null,0===e.length&&r.a.createElement(U.a,{style:{margin:"20vh 0"},variant:"h2",align:"center"},"Nenhum dispositivo novo ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(X.a,{fontSize:"inherit"})),r.a.createElement($,{devices:e}))))}}]),t}(n.PureComponent),_=a(57),ee=a(103),te=a(104),ae=a(105),ne=a(106),re=a(107),oe={root:{position:"fixed",bottom:0,left:0,right:0},placeholder:{height:56}};function ie(){var e=Object(w.f)().pathname;return r.a.createElement(r.a.Fragment,null,r.a.createElement("footer",{style:oe.root},r.a.createElement(_.a,{square:!0,elevation:3},r.a.createElement(ee.a,{value:e,showLabels:!0},r.a.createElement(te.a,{component:y.b,to:"/",value:"/",label:"Dispositivos Novos",icon:r.a.createElement(ae.a,null)}),r.a.createElement(te.a,{component:y.b,to:"/all",value:"/all",label:"Todos Dispositivos",icon:r.a.createElement(ne.a,null)}),r.a.createElement(te.a,{component:y.b,to:"/data",value:"/data",label:"Dados",icon:r.a.createElement(re.a,null)})))),r.a.createElement("div",{style:oe.placeholder}))}var ce=a(108),le=(a(52),{loader:{position:"fixed",top:0,left:0,right:0,bottom:0,margin:"auto"}}),se=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,devices:[]},a.getDevices=Object(j.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.next=3,L();case 3:t=e.sent,a.setState({devices:t,loading:!1});case 5:case"end":return e.stop()}}),e)}))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getDevices()}},{key:"render",value:function(){var e=this.state,t=e.devices,a=e.loading;return r.a.createElement(n.Fragment,null,r.a.createElement(C,{title:"Todos Dispositivos"}),r.a.createElement("main",null,r.a.createElement(M.a,null,a?r.a.createElement(ce.a,{size:80,style:le.loader}):r.a.createElement(r.a.Fragment,null,0===t.length&&r.a.createElement(U.a,{style:{margin:"20vh 0"},variant:"h2",align:"center"},"Nenhum dispositivo encontrado"),r.a.createElement($,{onUpdate:this.getDevices,devices:t})))))}}]),t}(n.PureComponent),ue=a(109),me=a(115),de=a(110),he=a(111),pe=a(112),ve={item:{margin:"10px 0"}};function fe(e){e.onUpdate;var t=e.data,a=void 0===t?[]:t;return r.a.createElement(ue.a,null,a.map((function(e){return r.a.createElement(ge,{key:e.createdAt,data:e})})))}function ge(e){var t=e.data,a=t.deviceId,n=t.createdAt,o=t.value,i=new Date(n);return r.a.createElement(me.a,{style:ve.item},r.a.createElement(de.a,null,r.a.createElement(he.a,null,a)),r.a.createElement(pe.a,{primary:"Valor: ".concat(o),secondary:i.toLocaleString()}))}var be=5e3,Ee=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:[]},a.updateData=Object(j.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:if(t=e.sent,a.timeout){e.next=5;break}return e.abrupt("return");case 5:a.setState({data:t}),a.timeout=setTimeout(a.updateData,be);case 7:case"end":return e.stop()}}),e)}))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.timeout=setTimeout(this.updateData,0)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.timeout=null}},{key:"render",value:function(){var e=this.state.data;return r.a.createElement(n.Fragment,null,r.a.createElement(C,{title:"Dados Coletados"}),r.a.createElement("main",null,r.a.createElement(M.a,null,0===e.length&&r.a.createElement(U.a,{style:{margin:"20vh 0"},variant:"h2",align:"center"},"Nenhum dado encontrado"),r.a.createElement(fe,{data:e}))))}}]),t}(n.PureComponent),ye=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement(y.a,null,r.a.createElement(d.a,{theme:f},r.a.createElement(E,{appServiceWorker:this.props.appServiceWorker},r.a.createElement(w.c,null,r.a.createElement(w.a,{exact:!0,path:"/",component:Z}),r.a.createElement(w.a,{exact:!0,path:"/all",component:se}),r.a.createElement(w.a,{exact:!0,path:"/data",component:Ee})),r.a.createElement(ie,null)))))}}]),t}(n.Component),we=(a(73),new(function(){function e(){var t=this;Object(c.a)(this,e),this.isLocalhost=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)),this.installPromise=new Promise((function(e){return t.installPromiseResolver=e})),this.updatePromise=new Promise((function(e){return t.updatePromiseResolver=e})),this.onUpdateFound((function(){return console.log("New content is available; please refresh.")})),this.onInstalled((function(){return console.log("Content is cached for offline use.")}))}return Object(l.a)(e,[{key:"register",value:function(){var e=this;if("serviceWorker"in navigator){if(new URL("/seg-iot-auth-app",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/seg-iot-auth-app","/service-worker.js");e.isLocalhost?(e.checkValidServiceWorker(t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):e.registerValidSW(t)}))}}},{key:"registerValidSW",value:function(e){var t=this;navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?t.updatePromiseResolver():t.installPromiseResolver())}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}},{key:"checkValidServiceWorker",value:function(e){var t=this;fetch(e).then((function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):t.registerValidSW(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}},{key:"unregister",value:function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},{key:"onInstalled",value:function(e){this.installPromise.then(e).catch(console.error)}},{key:"onUpdateFound",value:function(e){this.updatePromise.then(e).catch(console.error)}}]),e}()));i.a.render(r.a.createElement(ye,{appServiceWorker:we}),document.getElementById("root")),we.register()}},[[61,1,2]]]);
//# sourceMappingURL=main.4dcce8f1.chunk.js.map